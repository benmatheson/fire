perf1 + geom_path()
perf1 + geom_path(group=Subject)
perfSmall$one <- 2
perfSmall$one <- 1
View(perfSmall)
perfSmall$one <- 1
perfSmall$two <- 2
View(perfSmall)
perf1 + geom_path(group=1)
perf1 + geom_path(group=none)
perf1 + geom_path()
perf1 <- ggplot(perfSmall)+
aes(one, bookValue)+
geom_point()
perf1
perf1 <- ggplot(perfSmall)+
aes(one, bookValue)+
geom_point()+ggsave("perf1.png",width=20, height=100, units = "cm" )
?rbind
perfSmall <- rbind(perfSmall, perfSmall)
perfSmall
perf$marketValue <- as.numeric(perf$marketValue)
perf$bookValue <- as.numeric(perf$bookValue)
perfSmall <- perf[1:20,]
perfSmall$one <- 1
perfSmall <- rbind(perfSmall, perfSmall)
perfSmall
perfSmall$value <- perfSmall$bookValue
perfSmall <- perf[1:20,]
perfSmall$time <- 1
perfSmall2 <- perfSmall
perfSmall2$time <- 2
perfSmall$value <- perfSmall$bookValue
perfSmall2$value <- perfSmall$marketValue
perfSmall <- rbind(perfSmall, perfSmall2)
perfSmall
perf1 <- ggplot(perfSmall)+
aes(time, value, group=1)+
geom_point()+
geom_line+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perf1 <- ggplot(perfSmall)+
aes(time, value, group=1)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perf1 <- ggplot(perfSmall)+
aes(time, value, group=time)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perf1 <- ggplot(perfSmall)+
aes(time, value, group=value)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perfSmall
perf1 <- ggplot(perfSmall)+
aes(time, value, group=1)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perf1 <- ggplot(perfSmall)+
aes(time, value, group=group)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perf1 <- ggplot(perfSmall)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
?arrange
arrange(perf, desc(bookValue) )
perfSmall <- perf[1:20,]
perfSmall$time <- 1
?arrange
perfSmall2 <- perfSmall
perfSmall2$time <- 2
perfSmall$value <- perfSmall$bookValue
perfSmall2$value <- perfSmall$marketValue
perfSmall <- rbind(perfSmall, perfSmall2)
perfSmall
perf1 <- ggplot(perfSmall)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
ggsave("perf1.png",width=20, height=100, units = "cm" )
perf$time <- 1
perf2 <- perfSmall
perf2$time <- 2
perf2$value <- perf$bookValue
perf2$value <- perf$marketValue
perf <- rbind(perf, perf2)
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme(mininmal)+
ggsave("perf2.png",width=20, height=400, units = "cm" )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme(mininmal())+
ggsave("perf2.png",width=20, height=400, units = "cm" )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme(mininmal)+
ggsave("perf2.png",width=20, height=400, units = "cm" )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme_mininmal+
ggsave("perf2.png",width=20, height=400, units = "cm" )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal+
ggsave("perf2.png",width=20, height=400, units = "cm" )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=20, height=400, units = "cm" )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=20, height=400, units = "cm", limitsize = F )
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=50, height=200, units = "cm", limitsize = F )
perf$marketValue <- as.numeric(perf$marketValue)
perf$bookValue <- as.numeric(perf$bookValue)
arrange(perf, desc(bookValue) )
perf$time <- 1
perf2 <- perf
perf2$time <- 2
perf2$value <- perf$bookValue
perf2$value <- perf$marketValue
perf <- rbind(perf, perf2)
perf1 <- ggplot(perf)+
aes(time, value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=50, height=200, units = "cm", limitsize = F )
perf <- read.csv("stocks9_31_final.csv", stringsAsFactors = F)
perf <- perf[1:7297,]
perf$marketValue <- as.numeric(perf$marketValue)
perf$bookValue <- as.numeric(perf$bookValue)
arrange(perf, desc(bookValue))
perf$time <- 1
perf2 <- perf
perf2$time <- 2
perf$value <- perf$bookValue
perf2$value <- perf$marketValue
perf <- rbind(perf, perf2)
perf1 <- ggplot(perf)+
aes(time, factor(value), group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=50, height=200, units = "cm", limitsize = F )
perf1 <- ggplot(perf)+
aes(time, factor(value), group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=60, height=600, units = "cm", limitsize = F )
head(perf)
str(perf$Performance)
perf$Performance <- as.numeric(perf$Performance)
perf1 <- ggplot(perf)+
aes(factor(time), value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=60, height=400, units = "cm", limitsize = F )
perf1 <- ggplot(perf)+
aes(factor(time), value, group=stockName)+
geom_point()+
geom_line()+
theme_minimal()+
ggsave("perf2.png",width=150, height=30, units = "cm", limitsize = F )
perfRaw <- read.csv("stocks9_31_final.csv", stringsAsFactors = F)
perf <- read.csv("stocks9_31_final.csv", stringsAsFactors = F)
perf <- perf[1:7297,]
perf$marketValue <- as.numeric(perf$marketValue)
perf$bookValue <- as.numeric(perf$bookValue)
perf$Performance <- as.numeric(perf$Performance)
arrange(perf, desc(bookValue))
perfScat <- perf
scat <- ggplot(perfScat)+
geom_point(aes(marketValue, performance))
ggplot(perfScat)+
geom_point(aes(marketValue, performance))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockNaem))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance))+
geom_text(aes(label=stockName))
View(perfScat)
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_text(aes(label=stockName))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_text(aes(marketValue, Performance,label=stockName))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_text(aes(marketValue, Performance,label=stockName))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth()
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance)
#+geom_text(aes(marketValue, Performance,label=stockName))
View(perfScat)
#read in the dividend data from state of alaska website
pfd_amounts <- read.csv("dividends.csv", header=T)
pfd_amounts <- data.frame(pfd_amounts)
print(pfd_amounts[5])
print(typeof(pfd_amounts)[5])
colnames(pfd_amounts)[5] <- "dividend"
colnames(pfd_amounts)[1] <- "Year"
pfd_amounts$dividend <- gsub("$","",pfd_amounts$dividend, fixed = T)
pfd_amounts$dividend <- gsub(",","",pfd_amounts$dividend, fixed = T)
pfd_amounts$dividend <- as.numeric(pfd_amounts$dividend)
pfd_amounts <- select(pfd_amounts, Year, dividend)
head(pfd_amounts)
typeof(pfd_amounts$dividend)
#read in data from robert shiller stock market performance from http://pages.stern.nyu.edu/~adamodar/New_Home_Page/datafile/histretSP.html
returns <- read.csv("returns.csv")
#rename S.P. 500 column
colnames(returns)[2] <- "sp500"
returns$sp500 <- as.numeric(gsub("%", "",returns$sp500, fixed=F))
typeof(returns$sp500)
#filter to only have 1982-2016
returns <- filter(returns, Year >1981) %>% select(Year, sp500)
data  <- inner_join(pfd_amounts, returns, by="Year")
head(data)
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(1000000, .2))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(500000, .4))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, 1))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .4))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(4000000, .4))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(6000000, .4))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(3000000, .1))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))
ggplot(perfScat)+
geom_point(aes(marketValue, Performance, label=stockName))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave(perf3.png, width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance))+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance), size=2 )+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance), size=.3 )+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance), size=.3, opacity=.5 )+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance), size=.3, alpha=.5 )+
geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance), size=.3, alpha=.1 )+
#geom_smooth(aes(marketValue, Performance))+
geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_point(aes(marketValue, Performance), size=.3, alpha=.1 )+
#geom_smooth(aes(marketValue, Performance))+
#geom_bin2d(mapping = aes(marketValue, Performance), binwidth = c(2000000, .1))+
ggsave("perf3.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_bar(aes(x=Performance)+)
ggplot(perfScat)+
geom_bar(aes(x=Performance))+
ggsave("perfbin.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_bar(aes(x=Performance, color=factor(marketValue)))+
ggsave("perfbin.png", width=20, height=10, units = "cm")
ggplot(perfScat)+
geom_bar(aes(x=Performance))+
ggsave("perfbin.png", width=20, height=10, units = "cm")
perfTop <- perfScat %>%  arrange(desc())
perfTop <- perfScat %>%  arrange(desc()) %>% [1:100,]
perfTop <- perfScat %>%  arrange(desc()) %>% perfScat[1:100,]
perfTop <- perfScat %>%  arrange(desc()) %>% perfTop[1:100,]
perfTop <- perfScat %>%  arrange(desc())
perfTop <-  perfTop[1:100,]
perfTop <- perfScat %>% arrange(desc())
perfScat <- perf
arrange(perf, desc(marketValue))
perf <- arrange(perf, desc(marketValue))
perfScat <- perf
perfTop <- perfScat %>% arrange(desc())
perfTop <- perfScat %>% arrange(desc(marketValue))
perfTop <-  perfTop[1:100,]
perfTop
ggplot(perfTop)+
geom_bar(aes(x=Performance), width=)+
ggsave("perfTopbin.png", width=20, height=10, units = "cm")
ggplot(perfTop)+
geom_histogram(aes(x=Performance), binwidth =.1)+
ggsave("perfTopbin.png", width=20, height=10, units = "cm")
ggplot(perfTop)+
geom_histogram(aes(x=Performance), binwidth =.5)+
ggsave("perfTopbin.png", width=20, height=10, units = "cm")
ggplot(perfTop)+
geom_histogram(aes(x=Performance), binwidth =.05)+
ggsave("perfTopbin.png", width=20, height=10, units = "cm")
ggplot(perfTop)+
geom_point(aes(marketValue, Performance), size=.3, alpha=.1 )+
geom_text(aes(marketValue, Performance,label=stockName))
ggsave("perfTopLabel.png", width=50, height=10, units = "cm")
perfTop <-  perfTop[1:50,]
ggplot(perfTop)+
geom_point(aes(marketValue, Performance), size=.3, alpha=.1 )+
geom_text(aes(marketValue, Performance,label=stockName))
perfTop <-  perfTop[1:30,]
ggplot(perfTop)+
geom_point(aes(marketValue, Performance), size=.3, alpha=.1 )+
geom_text(aes(marketValue, Performance,label=stockName))
ggsave("perfTopLabel.png", width=50, height=10, units = "cm")
ggplot(perfTop)+
geom_point(aes(marketValue, Performance), size=1, alpha=.9 )+
geom_text(aes(marketValue, Performance,label=stockName))
ggsave("perfTopLabel.png", width=50, height=10, units = "cm")
ggplot(perfTop)+
geom_point(aes(marketValue, Performance), size=1, alpha=.9 )+
geom_text(aes(marketValue, Performance,label=stockName))+
theme(panel.background = element_blank())
ggsave("perfTopLabel.png", width=50, height=10, units = "cm")
perfUnicorn <- perfScat %>%  arrange(desc(Performance))
perfUnicorn <- perfUnicorn[1:30,]
ggsave("perfUnicornLabel.png", width=50, height=10, units = "cm")
perfUnicorn <- perfScat %>%  arrange(desc(Performance))
perfUnicorn <- perfUnicorn[1:30,]
perfTop <-  perfTop[1:30,]
ggplot(perfUnicorn)+
geom_point(aes(marketValue, Performance), size=1, alpha=.9 )+
geom_text(aes(marketValue, Performance,label=stockName))+
theme(panel.background = element_blank())
View(perfUnicorn)
ggplot(perfUnicorn)+
geom_point(aes(marketValue, Performance), size=1, alpha=.9 )+
geom_text(aes(marketValue, Performance,label=stockName))+
theme(panel.background = element_blank())
ggsave("perfUnicornLabel.png", width=50, height=10, units = "cm")
ggsave("perfUnicornLabel.png", width=70, height=30, units = "cm")
getwd()
setwd("/Users/benmatheson/scrape")
library(tidyverse)
library(rvest)
?rvest
??rvest
troopers <- read_html('https://dps.alaska.gov/dailydispatch/Home/Display?dateReceived=6/18/2017%2012:00:00%20AM')
raw_text <- troopers %>% html_nodes('li div') %>% html_text()
raw_text
raw_text <- troopers %>% html_nodes('li div') %>% html_attr()
raw_text
raw_text <- troopers %>% html_nodes('li div') %>% html_attr()
raw_text <- troopers %>% html_nodes('li div') %>% html_tag
raw_text <- troopers %>% html_nodes('li div') %>% html_tag()
raw_text
raw_text <- troopers %>% html_nodes('li div') %>% html_attr()
raw_text
raw_text <- troopers %>% html_nodes('li div') %>% html_attrs()
raw_text
raw_text <- troopers %>% html_nodes('li div') %>% html_text()
raw_text
View(raw_text)
iditarod_winners <- read_html(http://iditarod.com/race/archives/)
iditarod_winners <- read_html('http://iditarod.com/race/archives/')
raw_iditarod <- iditarod_winners %>% html_node(span) %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('#race-archive-list td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('#race-archive-list td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('#content') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('#content') %>% html_table()
iditarod_winners <- read_html('http://iditarod.com/race/archives/')
raw_iditarod <- iditarod_winners %>% html_nodes('#content') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('#content') %>% html_table(fill=T)
raw_iditarod <- iditarod_winners %>% html_nodes('#content') %>% html_table(fill=T)
raw_iditarod <- iditarod_winners %>% html_nodes('td') %>% html_table(fill=T)
raw_iditarod <- iditarod_winners %>% html_nodes('td , th) %>% html_table(fill=T)
#Parse tables into data frames with html_table()??
raw_iditarod <- iditarod_winners %>% html_nodes('td , th') %>% html_table(fill=T)
raw_iditarod <- iditarod_winners %>% html_nodes('td th') %>% html_table(fill=T)
raw_iditarod
raw_iditarod
raw_iditarod <- iditarod_winners %>% html_nodes('td, th') %>% html_table(fill=T)
raw_iditarod <- iditarod_winners %>% html_nodes('tr, td') %>% html_table(fill=T)
raw_iditarod <- iditarod_winners %>% html_nodes('tr, td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('tr td') %>% html_table()
raw_iditarod
raw_iditarod <- iditarod_winners %>% html_nodes('table, tr, td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('table, td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes(doc, 'table, td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('table td') %>% html_table()
raw_iditarod <- iditarod_winners %>% html_nodes('table td tr') %>% html_table()
raw_iditarod
raw_iditarod <- iditarod_winners %>% html_nodes('table td tr') %>% html_table(fill=T)
raw_iditarod
raw_iditarod <- iditarod_winners %>% html_nodes('table') %>% html_table(fill=T)
raw_iditarod
iditrod <-  raw_iditarod[2]
iditrod
iditrod
iditarod <-  raw_iditarod[2]
iditarod
iditarod <-  as.data.frame(raw_iditarod[2])
iditarod
raw_iditarod <- iditarod_winners %>% html_nodes('table') %>% html_table()
iditarod <-  as.data.frame(raw_iditarod[2])
iditarod
check <- read_html('http://iditarod.com/race/2017/logs/51/')
checkPoint <- check %>% html_nodes('table') %>% html_table()
checkPoint <- check %>% html_nodes('table') %>% html_table(fill=T)
checkPoint
checkPoint  <- as.data.frame(raw_iditarod[1])
checkPoint
checkPoint  <- as.data.frame(raw_iditarod[2])
checkPoint
checkPoint  <- as.data.frame(checkPoint[1])
checkPoint
checkPoint  <- as.data.frame(checkPoint[2])
checkPoint
check <- read_html('http://iditarod.com/race/2017/logs/51/')
checkPoint <- check %>% html_nodes('table') %>% html_table(fill=T)
checkPoint  <- as.data.frame(checkPoint[2])
checkPoint
check <- read_html('http://iditarod.com/race/2017/logs/51/')
checkPoint <- check %>% html_nodes('table') %>% html_table(fill=T)
checkPoint  <- as.data.frame(checkPoint[1])
checkPoint
View(checkPoint)
allMushers <- read_html('http://iditarod.com/race/mushers/')
allMushers <- read_html('http://iditarod.com/race/mushers/')
allMushers <- allMushers %>% html_nodes('table') %>% html_table(fill=T)
allMushers <- as.data.frame(allMushers)
allMushers
allMushers <- as.data.frame(allMushers[2])
allMushers
View(checkPoint)
source('~/fire/fire_script.R', echo=TRUE)
source('~/fire/fire_script.R', echo=TRUE)
getwd()
setwd("fire")
setwd("~/fire")
source('~/fire/fire_script.R', echo=TRUE)
source('~/fire/fire_script.R', echo=TRUE)
